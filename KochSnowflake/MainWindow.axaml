<Window
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:KochSnowflake"
    x:Class="KochSnowflake.MainWindow"
    Width="1200" Height="800"
    Title="Генератор фракталов"
    Background="{DynamicResource SolidBackgroundBrush}">

    <Grid ColumnDefinitions="*,300">
        <local:FractalCanvas x:Name="Canvas" Grid.Column="0" FitPadding="50" />

        <Border Grid.Column="1" Background="{DynamicResource ThemeControlLowBrush}" Padding="16">
            <Border.Styles>
                <Style Selector="TextBlock">
                    <Setter Property="TextWrapping" Value="WrapWithOverflow" />
                </Style>
            </Border.Styles>

            <ScrollViewer>
                <StackPanel Spacing="12">

                    <TextBlock Text="Генератор фракталов" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,8" />

                    <StackPanel>
                        <TextBlock Text="Количество итераций" Margin="0,0,0,6" />
                        <NumericUpDown x:Name="IterUpDown"
                                       Minimum="0" Maximum="7" Value="4" Increment="1" />
                    </StackPanel>

                    <StackPanel>
                        <TextBlock Text="Количество сторон (база)" Margin="0,8,0,6" />
                        <NumericUpDown x:Name="SidesUpDown"
                                       Minimum="1" Maximum="10" Value="1" Increment="1" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button x:Name="ResetBtn" Content="Сброс вида" />
                    </StackPanel>

                    <TextBlock Text="Пользовательский алгоритм" FontWeight="Bold" />
                    <StackPanel Spacing="6">
                        <CheckBox x:Name="UseCustomGen" Content="Использовать пользовательский генератор" />
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock VerticalAlignment="Center" Text="Аксиома:" Width="70" />
                            <TextBox x:Name="AxiomBox" Text="F" Width="160" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock VerticalAlignment="Center" Text="Угол (°):" Width="70" />
                            <NumericUpDown x:Name="AngleBox"
                                           Minimum="0" Maximum="180" Value="90" Increment="5"
                                           Width="160" />
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Spacing="4">
                            <TextBlock Text="Правила" />
                            <TextBlock Text="ⓘ" ToolTip.Placement="Left">
                                <ToolTip.Tip>
                                    <StackPanel Spacing="4">
                                        <TextBlock Text="- По одному на строку" />
                                        <TextBlock Text="- Направление CCW" />
                                        <TextBlock Text="- Алфавит: F, G, X, Y, +, -" />
                                        <TextBlock Text="- Поворот на угол влево – '+'" />
                                        <TextBlock Text="- Поворот на угол вправо – '-'" />
                                    </StackPanel>
                                </ToolTip.Tip>
                            </TextBlock>
                        </StackPanel>

                        <TextBox x:Name="RulesBox"
                                 Height="96"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 Text="F=F+F++F+FF"
                                 Watermark="F=F+F++F+FF"
                                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                                 ScrollViewer.HorizontalScrollBarVisibility="Disabled" />

                        <StackPanel Spacing="4">
                            <Button x:Name="ApplyGenBtn" Content="Применить алгоритм" />
                            <TextBlock x:Name="GenInfo" VerticalAlignment="Center" />
                        </StackPanel>
                    </StackPanel>

                    <TextBlock Text="Управление" FontWeight="Bold" />
                    <StackPanel Margin="8,4,8,8" Spacing="4">
                        <TextBlock Text="- Зум — колесо мыши" />
                        <TextBlock Text="- Перемещение — зажмите ЛКМ и тяните" />
                        <TextBlock Text="- Для сброса вида используйте кнопку выше" />
                    </StackPanel>

                    <TextBlock Text="Отладка" FontWeight="Bold" />
                    <StackPanel Margin="8,4,8,8" Spacing="4">
                        <TextBlock x:Name="DbgIter" />
                        <TextBlock x:Name="DbgZoom" />
                        <TextBlock x:Name="DbgVerts" />
                        <TextBlock x:Name="DbgGenSeg" />
                        <TextBlock x:Name="DbgCplx" />
                    </StackPanel>

                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>